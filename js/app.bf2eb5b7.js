(()=>{"use strict";var e={7126:(e,t,n)=>{n(3792),n(3362),n(9085),n(9391);var a=n(5130),s=(n(2010),n(9432),n(6768)),l=n(4232),i={class:"container mt-4"},o={class:"d-flex justify-content-between align-items-center mb-4"},r={class:"row mb-4"},c={class:"col-md-6"},d={class:"card"},u={class:"card-body"},p={class:"col-md-6"},f={class:"card"},m={class:"card-body"},v={class:"list-group"},b={class:"badge bg-primary rounded-pill"},h={key:0,class:"text-muted text-center py-3"},k={key:1,class:"card mb-4"},g={class:"card-body"},y={key:2,class:"card mb-4"},L={class:"card-header bg-info text-white d-flex justify-content-between align-items-center"},C={class:"card-body"};function w(e,t,n,a,w,x){var F=(0,s.g2)("welcome-page"),E=(0,s.g2)("file-uploader"),A=(0,s.g2)("statistics-panel"),K=(0,s.g2)("translation-editor"),R=(0,s.g2)("help-guide");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",i,[(0,s.Lk)("div",o,[t[7]||(t[7]=(0,s.Lk)("h1",{class:"mb-0"},"ARB 文件编辑器",-1)),(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-outline-success me-2",onClick:t[0]||(t[0]=function(){return x.loadExampleFiles&&x.loadExampleFiles.apply(x,arguments)})},t[5]||(t[5]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-text"},null,-1),(0,s.eW)(" 加载示例 ")])),(0,s.Lk)("button",{class:"btn btn-outline-info",onClick:t[1]||(t[1]=function(e){return w.showHelp=!0})},t[6]||(t[6]=[(0,s.Lk)("i",{class:"bi bi-question-circle"},null,-1),(0,s.eW)(" 帮助 ")]))])]),0===w.loadedFiles.length?((0,s.uX)(),(0,s.Wv)(F,{key:0,onLoadExamples:x.loadExampleFiles},null,8,["onLoadExamples"])):(0,s.Q3)("",!0),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[t[8]||(t[8]=(0,s.Lk)("div",{class:"card-header bg-primary text-white"},[(0,s.Lk)("h5",{class:"mb-0"},"上传 ARB 文件")],-1)),(0,s.Lk)("div",u,[(0,s.bF)(E,{onFilesUploaded:x.handleFilesUploaded},null,8,["onFilesUploaded"])])])]),(0,s.Lk)("div",p,[(0,s.Lk)("div",f,[t[9]||(t[9]=(0,s.Lk)("div",{class:"card-header bg-success text-white"},[(0,s.Lk)("h5",{class:"mb-0"},"已加载的文件")],-1)),(0,s.Lk)("div",m,[(0,s.Lk)("ul",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.loadedFiles,function(e,t){return(0,s.uX)(),(0,s.CE)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,s.eW)((0,l.v_)(e.name)+" ",1),(0,s.Lk)("span",b,(0,l.v_)(Object.keys(e.content).length)+" 条",1)])}),128))]),0===w.loadedFiles.length?((0,s.uX)(),(0,s.CE)("div",h," 尚未加载任何文件 ")):(0,s.Q3)("",!0)])])])]),w.loadedFiles.length>0?((0,s.uX)(),(0,s.CE)("div",k,[t[10]||(t[10]=(0,s.Lk)("div",{class:"card-header bg-secondary text-white"},[(0,s.Lk)("h5",{class:"mb-0"},"统计与导出")],-1)),(0,s.Lk)("div",g,[(0,s.bF)(A,{files:w.loadedFiles},null,8,["files"])])])):(0,s.Q3)("",!0),w.loadedFiles.length>0?((0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("div",L,[t[13]||(t[13]=(0,s.Lk)("h5",{class:"mb-0"},"翻译管理",-1)),(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-light btn-sm me-2",onClick:t[2]||(t[2]=function(){return x.addNewKey&&x.addNewKey.apply(x,arguments)})},t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-plus-circle"},null,-1),(0,s.eW)(" 添加新键 ")])),(0,s.Lk)("button",{class:"btn btn-light btn-sm",onClick:t[3]||(t[3]=function(){return x.downloadAllFiles&&x.downloadAllFiles.apply(x,arguments)})},t[12]||(t[12]=[(0,s.Lk)("i",{class:"bi bi-download"},null,-1),(0,s.eW)(" 下载所有文件 ")]))])]),(0,s.Lk)("div",C,[(0,s.bF)(K,{files:w.loadedFiles,onUpdateTranslation:x.updateTranslation,onDownloadFile:x.downloadFile},null,8,["files","onUpdateTranslation","onDownloadFile"])])])):(0,s.Q3)("",!0)]),w.showHelp?((0,s.uX)(),(0,s.Wv)(R,{key:0,onClose:t[4]||(t[4]=function(e){return w.showHelp=!1})})):(0,s.Q3)("",!0)],64)}n(1629),n(739),n(8111),n(7588),n(3110),n(6099),n(7764),n(3500),n(2953),n(3296),n(7208),n(8408),n(4603),n(7566),n(8721);var x={class:"file-uploader"},F={class:"mb-3"},E={key:0,class:"mb-3"},A={class:"d-flex justify-content-between align-items-center mb-2"},K={class:"list-group"},R={key:1,class:"alert alert-danger",role:"alert"};function _(e,t,n,a,i,o){return(0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("div",F,[t[2]||(t[2]=(0,s.Lk)("label",{for:"fileInput",class:"form-label"},"选择ARB文件",-1)),(0,s.Lk)("input",{type:"file",id:"fileInput",class:"form-control",multiple:"",accept:".arb,.json",onChange:t[0]||(t[0]=function(){return o.handleFileChange&&o.handleFileChange.apply(o,arguments)})},null,32),t[3]||(t[3]=(0,s.Lk)("div",{class:"form-text"},"支持上传多个.arb或.json文件",-1))]),i.selectedFiles.length>0?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",A,[(0,s.Lk)("span",null,"已选择 "+(0,l.v_)(i.selectedFiles.length)+" 个文件",1),(0,s.Lk)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return o.uploadFiles&&o.uploadFiles.apply(o,arguments)})},"加载文件")]),(0,s.Lk)("ul",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.selectedFiles,function(e,t){return(0,s.uX)(),(0,s.CE)("li",{key:t,class:"list-group-item"},(0,l.v_)(e.name),1)}),128))])])):(0,s.Q3)("",!0),i.error?((0,s.uX)(),(0,s.CE)("div",R,(0,l.v_)(i.error),1)):(0,s.Q3)("",!0)])}n(3418),n(2062),n(1701);const j={name:"FileUploader",data:function(){return{selectedFiles:[],error:null}},methods:{handleFileChange:function(e){this.selectedFiles=Array.from(e.target.files),this.error=null},uploadFiles:function(){var e=this;if(0!==this.selectedFiles.length){var t=this.selectedFiles.map(function(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(a){try{var s=JSON.parse(a.target.result);t({name:e.name,content:s})}catch(l){n("文件 ".concat(e.name," 不是有效的JSON格式"))}},a.onerror=function(){n("读取文件 ".concat(e.name," 时出错"))},a.readAsText(e)})});Promise.all(t).then(function(t){e.$emit("files-uploaded",t),e.selectedFiles=[],document.getElementById("fileInput").value=""})["catch"](function(t){e.error=t})}else this.error="请先选择文件"}}};var X=n(1241);const T=(0,X.A)(j,[["render",_]]),U=T;var B={class:"translation-editor"},O={class:"nav nav-tabs mb-4"},N={class:"nav-item"},Q={class:"nav-item"},q={class:"mb-4"},I={class:"input-group"},W={class:"table-responsive"},S={class:"table table-bordered table-hover"},P={class:"table-light"},M=["onClick"],V={class:"key-cell"},D={class:"text-break"},J=["value","onInput"],$={key:0},z=["colspan"];function H(e,t,n,i,o,r){var c=(0,s.g2)("translation-comparison");return(0,s.uX)(),(0,s.CE)("div",B,[(0,s.Lk)("ul",O,[(0,s.Lk)("li",N,[(0,s.Lk)("a",{class:(0,l.C4)(["nav-link",{active:"edit"===o.activeTab}]),href:"#",onClick:t[0]||(t[0]=(0,a.D$)(function(e){return o.activeTab="edit"},["prevent"]))}," 编辑翻译 ",2)]),(0,s.Lk)("li",Q,[(0,s.Lk)("a",{class:(0,l.C4)(["nav-link",{active:"compare"===o.activeTab}]),href:"#",onClick:t[1]||(t[1]=(0,a.D$)(function(e){return o.activeTab="compare"},["prevent"]))}," 翻译对比 ",2)])]),(0,s.bo)((0,s.Lk)("div",null,[(0,s.Lk)("div",q,[(0,s.Lk)("div",I,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",placeholder:"搜索键或值...","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.searchQuery=e})},null,512),[[a.Jo,o.searchQuery]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[3]||(t[3]=function(e){return o.searchQuery=""})}," 清除 ")])]),(0,s.Lk)("div",W,[(0,s.Lk)("table",S,[(0,s.Lk)("thead",P,[(0,s.Lk)("tr",null,[t[4]||(t[4]=(0,s.Lk)("th",{style:{width:"20%"}},"键",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.files,function(t,n){return(0,s.uX)(),(0,s.CE)("th",{key:n,style:(0,l.Tr)({width:r.columnWidth})},[(0,s.eW)((0,l.v_)(r.getLanguageFromFilename(t.name))+" ",1),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary float-end",onClick:function(t){return e.$emit("download-file",n)},title:"下载此文件"}," 下载 ",8,M)],4)}),128))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredKeys,function(e){return(0,s.uX)(),(0,s.CE)("tr",{key:e},[(0,s.Lk)("td",V,[(0,s.Lk)("div",D,(0,l.v_)(e),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.files,function(t,n){return(0,s.uX)(),(0,s.CE)("td",{key:n},[(0,s.Lk)("textarea",{class:"form-control translation-textarea",value:t.content[e]||"",onInput:function(t){return r.updateTranslation(n,e,t.target.value)},rows:"2"},null,40,J)])}),128))])}),128)),0===r.filteredKeys.length?((0,s.uX)(),(0,s.CE)("tr",$,[(0,s.Lk)("td",{colspan:n.files.length+1,class:"text-center py-3"}," 没有找到匹配的翻译项 ",8,z)])):(0,s.Q3)("",!0)])])])],512),[[a.aG,"edit"===o.activeTab]]),(0,s.bo)((0,s.Lk)("div",null,[(0,s.bF)(c,{files:n.files,onAddMissingKey:r.addMissingKey},null,8,["files","onAddMissingKey"])],512),[[a.aG,"compare"===o.activeTab]])])}var G=n(3604),Z=(n(2008),n(4423),n(6910),n(2489),n(7495),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(1699),n(1761),{class:"translation-comparison"}),Y={key:0,class:"mb-4"},ee={class:"row"},te={class:"col-md-4 mb-3"},ne={class:"card h-100 border-primary"},ae={class:"card-body text-center"},se={class:"display-6"},le={class:"col-md-4 mb-3"},ie={class:"card h-100 border-warning"},oe={class:"card-body text-center"},re={class:"display-6 text-warning"},ce={class:"col-md-4 mb-3"},de={class:"card h-100 border-danger"},ue={class:"card-body text-center"},pe={class:"display-6 text-danger"},fe={key:1,class:"mb-4"},me={class:"row"},ve={class:"card h-100"},be={class:"card-body"},he={class:"d-flex justify-content-between align-items-center mb-2"},ke={class:"mb-0"},ge={class:"progress mb-2"},ye={class:"d-flex justify-content-between small text-muted"},Le={key:0,class:"text-warning me-2"},Ce={key:1,class:"text-danger"},we={class:"d-flex justify-content-between align-items-center mb-4"},xe=["disabled"],Fe=["disabled"],Ee={key:2},Ae={class:"mb-3"},Ke={class:"d-flex justify-content-between align-items-center mb-2"},Re={class:"input-group",style:{"max-width":"300px"}},_e={class:"table-responsive"},je={class:"table table-bordered table-hover"},Xe=["onClick"],Te={key:0},Ue={key:3,class:"text-center py-5 text-muted bg-light rounded"};function Be(e,t,n,i,o,r){return(0,s.uX)(),(0,s.CE)("div",Z,[t[20]||(t[20]=(0,s.Lk)("div",{class:"alert alert-info mb-4"},[(0,s.Lk)("h5",{class:"alert-heading"},"翻译对比分析"),(0,s.Lk)("p",null,"此工具可以帮助您发现不同语言文件之间的差异，包括缺失的键和空值。")],-1)),o.comparisonResults.length>0?((0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("div",ne,[(0,s.Lk)("div",ae,[t[4]||(t[4]=(0,s.Lk)("h6",{class:"card-title"},"总键数",-1)),(0,s.Lk)("p",se,(0,l.v_)(o.totalUniqueKeys),1),t[5]||(t[5]=(0,s.Lk)("p",{class:"text-muted small"},"所有文件中的唯一键总数",-1))])])]),(0,s.Lk)("div",le,[(0,s.Lk)("div",ie,[(0,s.Lk)("div",oe,[t[6]||(t[6]=(0,s.Lk)("h6",{class:"card-title"},"缺失键数",-1)),(0,s.Lk)("p",re,(0,l.v_)(r.missingKeysCount),1),t[7]||(t[7]=(0,s.Lk)("p",{class:"text-muted small"},"所有文件中缺失的键总数",-1))])])]),(0,s.Lk)("div",ce,[(0,s.Lk)("div",de,[(0,s.Lk)("div",ue,[t[8]||(t[8]=(0,s.Lk)("h6",{class:"card-title"},"空值键数",-1)),(0,s.Lk)("p",pe,(0,l.v_)(r.emptyValuesCount),1),t[9]||(t[9]=(0,s.Lk)("p",{class:"text-muted small"},"所有文件中值为空的键总数",-1))])])])])])):(0,s.Q3)("",!0),o.comparisonResults.length>0?((0,s.uX)(),(0,s.CE)("div",fe,[t[10]||(t[10]=(0,s.Lk)("h6",{class:"mb-3"},"文件覆盖率",-1)),(0,s.Lk)("div",me,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.files,function(e,t){return(0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-md-6 mb-3"},[(0,s.Lk)("div",ve,[(0,s.Lk)("div",be,[(0,s.Lk)("div",he,[(0,s.Lk)("h6",ke,(0,l.v_)(e.name),1),(0,s.Lk)("span",{class:(0,l.C4)(["badge",r.getCoverageClass(e)])},(0,l.v_)(r.getCoveragePercentage(e))+"%",3)]),(0,s.Lk)("div",ge,[(0,s.Lk)("div",{class:(0,l.C4)(["progress-bar",r.getCoverageClass(e)]),style:(0,l.Tr)({width:r.getCoveragePercentage(e)+"%"})},null,6)]),(0,s.Lk)("div",ye,[(0,s.Lk)("span",null,"键数: "+(0,l.v_)(Object.keys(e.content).length)+"/"+(0,l.v_)(o.totalUniqueKeys),1),(0,s.Lk)("span",null,[r.getMissingKeysCount(e)>0?((0,s.uX)(),(0,s.CE)("span",Le," 缺失: "+(0,l.v_)(r.getMissingKeysCount(e)),1)):(0,s.Q3)("",!0),r.getEmptyValuesCount(e)>0?((0,s.uX)(),(0,s.CE)("span",Ce," 空值: "+(0,l.v_)(r.getEmptyValuesCount(e)),1)):(0,s.Q3)("",!0)])])])])])}),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",we,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=function(){return r.compareTranslations&&r.compareTranslations.apply(r,arguments)})},t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-arrow-repeat"},null,-1),(0,s.eW)(" 重新分析 ")])),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=function(){return r.addAllMissingKeys&&r.addAllMissingKeys.apply(r,arguments)}),disabled:0===r.missingKeysCount},t[12]||(t[12]=[(0,s.Lk)("i",{class:"bi bi-plus-circle"},null,-1),(0,s.eW)(" 添加所有缺失键 ")]),8,xe)]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=function(){return r.generateReport&&r.generateReport.apply(r,arguments)}),disabled:0===o.comparisonResults.length},t[13]||(t[13]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-text"},null,-1),(0,s.eW)(" 导出报告 ")]),8,Fe)]),o.comparisonResults.length>0?((0,s.uX)(),(0,s.CE)("div",Ee,[(0,s.Lk)("div",Ae,[(0,s.Lk)("div",Ke,[t[15]||(t[15]=(0,s.Lk)("h6",null,"详细问题列表",-1)),(0,s.Lk)("div",Re,[t[14]||(t[14]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-search"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",placeholder:"搜索键名...","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.searchQuery=e})},null,512),[[a.Jo,o.searchQuery]])])]),(0,s.Lk)("div",_e,[(0,s.Lk)("table",je,[t[18]||(t[18]=(0,s.Lk)("thead",{class:"table-light"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"文件"),(0,s.Lk)("th",null,"问题类型"),(0,s.Lk)("th",null,"键"),(0,s.Lk)("th",{style:{width:"120px"}},"操作")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredResults,function(e,n){return(0,s.uX)(),(0,s.CE)("tr",{key:n},[(0,s.Lk)("td",null,(0,l.v_)(e.fileName),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,l.C4)({"badge bg-warning":"missing"===e.type,"badge bg-danger":"empty"===e.type})},(0,l.v_)("missing"===e.type?"缺失键":"空值"),3)]),(0,s.Lk)("td",null,[(0,s.Lk)("code",null,(0,l.v_)(e.key),1)]),(0,s.Lk)("td",null,["missing"===e.type?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:function(t){return r.addMissingKey(e.fileIndex,e.key)}},t[16]||(t[16]=[(0,s.Lk)("i",{class:"bi bi-plus-circle"},null,-1),(0,s.eW)(" 添加键 ")]),8,Xe)):(0,s.Q3)("",!0)])])}),128)),0===r.filteredResults.length?((0,s.uX)(),(0,s.CE)("tr",Te,t[17]||(t[17]=[(0,s.Lk)("td",{colspan:"4",class:"text-center py-3 text-muted"}," 没有找到匹配的结果 ",-1)]))):(0,s.Q3)("",!0)])])])])])):((0,s.uX)(),(0,s.CE)("div",Ue,t[19]||(t[19]=[(0,s.Lk)("i",{class:"bi bi-translate display-4 mb-3 d-block"},null,-1),(0,s.Lk)("p",{class:"lead"},'点击"重新分析"按钮开始对比翻译文件',-1),(0,s.Lk)("p",{class:"small"}," 分析将帮助您发现不同语言文件之间的差异，包括缺失的键和空值 ",-1)])))])}n(8706),n(4114),n(3288);const Oe={name:"TranslationComparison",props:{files:{type:Array,required:!0}},data:function(){return{comparisonResults:[],searchQuery:"",totalUniqueKeys:0}},computed:{filteredResults:function(){if(!this.searchQuery)return this.comparisonResults;var e=this.searchQuery.toLowerCase();return this.comparisonResults.filter(function(t){return t.key.toLowerCase().includes(e)||t.fileName.toLowerCase().includes(e)})},missingKeysCount:function(){return this.comparisonResults.filter(function(e){return"missing"===e.type}).length},emptyValuesCount:function(){return this.comparisonResults.filter(function(e){return"empty"===e.type}).length}},methods:{compareTranslations:function(){var e=this;if(this.comparisonResults=[],this.searchQuery="",this.files.length<=1)alert("需要至少两个文件才能进行比较");else{var t=new Set;this.files.forEach(function(e){Object.keys(e.content).forEach(function(e){t.add(e)})}),this.totalUniqueKeys=t.size,this.files.forEach(function(n,a){t.forEach(function(t){t in n.content?""===n.content[t]&&e.comparisonResults.push({fileName:n.name,fileIndex:a,type:"empty",key:t}):e.comparisonResults.push({fileName:n.name,fileIndex:a,type:"missing",key:t})})}),this.comparisonResults.sort(function(e,t){return e.fileName!==t.fileName?e.fileName.localeCompare(t.fileName):e.type!==t.type?"missing"===e.type?-1:1:e.key.localeCompare(t.key)})}},addMissingKey:function(e,t){var n,a="",s=(0,G.A)(this.files);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(l.content[t]){a=l.content[t];break}}}catch(i){s.e(i)}finally{s.f()}this.$emit("add-missing-key",e,t,a),this.comparisonResults=this.comparisonResults.filter(function(n){return!(n.fileIndex===e&&n.key===t&&"missing"===n.type)})},getMissingKeysCount:function(e){return this.comparisonResults.filter(function(t){return t.fileName===e.name&&"missing"===t.type}).length},getEmptyValuesCount:function(e){return this.comparisonResults.filter(function(t){return t.fileName===e.name&&"empty"===t.type}).length},getCoveragePercentage:function(e){if(0===this.totalUniqueKeys)return 100;var t=this.getMissingKeysCount(e);return Math.round((this.totalUniqueKeys-t)/this.totalUniqueKeys*100)},getCoverageClass:function(e){var t=this.getCoveragePercentage(e);return t>=90?"bg-success":t>=70?"bg-info":t>=50?"bg-warning":"bg-danger"},addAllMissingKeys:function(){var e=this;if(0!==this.missingKeysCount&&confirm("确定要添加所有 ".concat(this.missingKeysCount," 个缺失的键吗？"))){var t=new Set;this.comparisonResults.forEach(function(n){"missing"!==n.type||t.has("".concat(n.fileIndex,"-").concat(n.key))||(e.addMissingKey(n.fileIndex,n.key),t.add("".concat(n.fileIndex,"-").concat(n.key)))})}},generateReport:function(){var e=this;if(0!==this.comparisonResults.length){var t="# ARB文件翻译对比报告\n\n";t+="生成时间: ".concat((new Date).toLocaleString(),"\n\n"),t+="## 摘要\n\n",t+="- 总键数: ".concat(this.totalUniqueKeys,"\n"),t+="- 缺失键数: ".concat(this.missingKeysCount,"\n"),t+="- 空值键数: ".concat(this.emptyValuesCount,"\n\n"),t+="## 文件覆盖率\n\n",t+="| 文件名 | 覆盖率 | 缺失键数 | 空值键数 |\n|--------|--------|--------|--------|\n",this.files.forEach(function(n){var a=e.getCoveragePercentage(n),s=e.getMissingKeysCount(n),l=e.getEmptyValuesCount(n);t+="| ".concat(n.name," | ").concat(a,"% | ").concat(s," | ").concat(l," |\n")}),t+="\n## 问题详情\n\n";var n={};for(var a in this.comparisonResults.forEach(function(e){n[e.fileName]||(n[e.fileName]=[]),n[e.fileName].push(e)}),n)t+="### ".concat(a,"\n\n"),t+="| 问题类型 | 键 | 建议操作 |\n|---------|------|---------|\n",n[a].forEach(function(e){var n="missing"===e.type?"缺失键":"空值",a="missing"===e.type?"添加键":"添加翻译";t+="| ".concat(n," | ").concat(e.key," | ").concat(a," |\n")}),t+="\n";var s=document.createElement("a"),l=new Blob([t],{type:"text/markdown"});s.href=URL.createObjectURL(l),s.download="arb_translation_report.md",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}},Ne=(0,X.A)(Oe,[["render",Be]]),Qe=Ne,qe={name:"TranslationEditor",components:{TranslationComparison:Qe},props:{files:{type:Array,required:!0}},data:function(){return{searchQuery:"",activeTab:"edit"}},computed:{allKeys:function(){var e=new Set;return this.files.forEach(function(t){Object.keys(t.content).forEach(function(t){e.add(t)})}),Array.from(e).sort()},filteredKeys:function(){var e=this;if(!this.searchQuery)return this.allKeys;var t=this.searchQuery.toLowerCase();return this.allKeys.filter(function(n){if(n.toLowerCase().includes(t))return!0;var a,s=(0,G.A)(e.files);try{for(s.s();!(a=s.n()).done;){var l=a.value,i=l.content[n];if(i&&i.toLowerCase().includes(t))return!0}}catch(o){s.e(o)}finally{s.f()}return!1})},columnWidth:function(){return"".concat(80/Math.max(this.files.length,1),"%")}},methods:{updateTranslation:function(e,t,n){this.$emit("update-translation",e,t,n)},getLanguageFromFilename:function(e){var t=e.match(/intl_([a-zA-Z_]+)\.(arb|json)/);return t?t[1].toUpperCase():e},addMissingKey:function(e,t,n){this.$emit("update-translation",e,t,n)}}},Ie=(0,X.A)(qe,[["render",H],["__scopeId","data-v-548ff89d"]]),We=Ie;var Se={class:"help-guide"},Pe={class:"card"},Me={class:"card-header bg-info text-white d-flex justify-content-between align-items-center"};function Ve(e,t,n,a,l,i){return(0,s.uX)(),(0,s.CE)("div",Se,[(0,s.Lk)("div",Pe,[(0,s.Lk)("div",Me,[t[1]||(t[1]=(0,s.Lk)("h5",{class:"mb-0"},"使用帮助",-1)),(0,s.Lk)("button",{type:"button",class:"btn-close btn-close-white","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})})]),t[2]||(t[2]=(0,s.Fv)('<div class="card-body" data-v-edeb02c6><h6 data-v-edeb02c6>什么是ARB文件？</h6><p data-v-edeb02c6> ARB (Application Resource Bundle) 文件是Flutter应用中用于国际化的资源文件。它们包含键值对，其中键是标识符，值是翻译文本。 </p><h6 data-v-edeb02c6>如何使用此工具？</h6><ol data-v-edeb02c6><li data-v-edeb02c6><strong data-v-edeb02c6>上传文件</strong> - 点击&quot;选择ARB文件&quot;按钮上传一个或多个ARB文件。 </li><li data-v-edeb02c6><strong data-v-edeb02c6>编辑翻译</strong> - 上传后，您可以在表格中编辑各语言的翻译文本。 </li><li data-v-edeb02c6><strong data-v-edeb02c6>搜索</strong> - 使用搜索框查找特定的键或翻译内容。</li><li data-v-edeb02c6><strong data-v-edeb02c6>下载</strong> - 编辑完成后，点击&quot;下载&quot;按钮保存修改后的文件。 </li></ol><h6 data-v-edeb02c6>文件命名约定</h6><p data-v-edeb02c6>ARB文件通常遵循以下命名约定：</p><ul data-v-edeb02c6><li data-v-edeb02c6><code data-v-edeb02c6>intl_en.arb</code> - 英语翻译</li><li data-v-edeb02c6><code data-v-edeb02c6>intl_zh.arb</code> - 中文翻译</li><li data-v-edeb02c6><code data-v-edeb02c6>intl_pt_PT.arb</code> - 葡萄牙语（葡萄牙）翻译</li></ul><h6 data-v-edeb02c6>提示</h6><ul data-v-edeb02c6><li data-v-edeb02c6>确保所有语言文件包含相同的键。</li><li data-v-edeb02c6>编辑时会自动保存到内存中，但需要手动下载文件以保存到磁盘。</li><li data-v-edeb02c6>可以同时编辑多个语言文件，方便对照翻译。</li></ul></div>',1))])])}const De={name:"HelpGuide",emits:["close"]},Je=(0,X.A)(De,[["render",Ve],["__scopeId","data-v-edeb02c6"]]),$e=Je;var ze={class:"statistics-panel"},He={class:"card"},Ge={class:"card-body"},Ze={class:"row"},Ye={class:"col-md-6"},et={class:"list-group mb-3"},tt={class:"list-group-item d-flex justify-content-between align-items-center"},nt={class:"badge bg-primary rounded-pill"},at={class:"list-group-item d-flex justify-content-between align-items-center"},st={class:"badge bg-primary rounded-pill"},lt={class:"list-group-item d-flex justify-content-between align-items-center"},it={class:"badge bg-primary rounded-pill"},ot={class:"col-md-6"},rt={class:"d-flex justify-content-between mb-1"},ct={class:"progress"},dt={class:"mt-4"},ut={class:"d-flex gap-2"};function pt(e,t,n,a,i,o){return(0,s.uX)(),(0,s.CE)("div",ze,[(0,s.Lk)("div",He,[t[12]||(t[12]=(0,s.Lk)("div",{class:"card-header bg-secondary text-white"},[(0,s.Lk)("h5",{class:"mb-0"},"统计信息")],-1)),(0,s.Lk)("div",Ge,[(0,s.Lk)("div",Ze,[(0,s.Lk)("div",Ye,[t[6]||(t[6]=(0,s.Lk)("h6",null,"基本信息",-1)),(0,s.Lk)("ul",et,[(0,s.Lk)("li",tt,[t[3]||(t[3]=(0,s.eW)(" 文件数量 ")),(0,s.Lk)("span",nt,(0,l.v_)(n.files.length),1)]),(0,s.Lk)("li",at,[t[4]||(t[4]=(0,s.eW)(" 唯一键数量 ")),(0,s.Lk)("span",st,(0,l.v_)(o.uniqueKeysCount),1)]),(0,s.Lk)("li",lt,[t[5]||(t[5]=(0,s.eW)(" 总翻译条目 ")),(0,s.Lk)("span",it,(0,l.v_)(o.totalTranslationsCount),1)])])]),(0,s.Lk)("div",ot,[t[7]||(t[7]=(0,s.Lk)("h6",null,"语言覆盖率",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.files,function(e,t){return(0,s.uX)(),(0,s.CE)("div",{key:t,class:"mb-2"},[(0,s.Lk)("div",rt,[(0,s.Lk)("span",null,(0,l.v_)(o.getLanguageFromFilename(e.name)),1),(0,s.Lk)("span",null,(0,l.v_)(Math.round(100*o.getCoveragePercentage(e)))+"%",1)]),(0,s.Lk)("div",ct,[(0,s.Lk)("div",{class:(0,l.C4)(["progress-bar",o.getProgressBarClass(o.getCoveragePercentage(e))]),style:(0,l.Tr)({width:100*o.getCoveragePercentage(e)+"%"})},null,6)])])}),128))])]),(0,s.Lk)("div",dt,[t[11]||(t[11]=(0,s.Lk)("h6",null,"高级功能",-1)),(0,s.Lk)("div",ut,[(0,s.Lk)("button",{class:"btn btn-outline-primary",onClick:t[0]||(t[0]=function(){return o.exportAsCSV&&o.exportAsCSV.apply(o,arguments)})},t[8]||(t[8]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-spreadsheet"},null,-1),(0,s.eW)(" 导出为CSV ")])),(0,s.Lk)("button",{class:"btn btn-outline-success",onClick:t[1]||(t[1]=function(){return o.exportAsExcel&&o.exportAsExcel.apply(o,arguments)})},t[9]||(t[9]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-excel"},null,-1),(0,s.eW)(" 导出为Excel ")])),(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=function(){return o.exportAsJson&&o.exportAsJson.apply(o,arguments)})},t[10]||(t[10]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-code"},null,-1),(0,s.eW)(" 导出为JSON ")]))])])])])])}var ft=n(8653);n(5440);const mt={name:"StatisticsPanel",props:{files:{type:Array,required:!0}},computed:{uniqueKeysCount:function(){var e=new Set;return this.files.forEach(function(t){Object.keys(t.content).forEach(function(t){e.add(t)})}),e.size},totalTranslationsCount:function(){var e=0;return this.files.forEach(function(t){e+=Object.keys(t.content).length}),e},allUniqueKeys:function(){var e=new Set;return this.files.forEach(function(t){Object.keys(t.content).forEach(function(t){e.add(t)})}),Array.from(e).sort()}},methods:{getLanguageFromFilename:function(e){var t=e.match(/intl_([a-zA-Z_]+)\.(arb|json)/);return t?t[1].toUpperCase():e},getCoveragePercentage:function(e){if(0===this.allUniqueKeys.length)return 0;var t=Object.keys(e.content).length;return t/this.allUniqueKeys.length},getProgressBarClass:function(e){return e>=.9?"bg-success":e>=.7?"bg-info":e>=.5?"bg-warning":"bg-danger"},exportAsCSV:function(){var e=this,t="Key";this.files.forEach(function(n){t+=",".concat(e.getLanguageFromFilename(n.name))}),t+="\n",this.allUniqueKeys.forEach(function(n){t+='"'.concat(n,'"'),e.files.forEach(function(e){var a=e.content[n]||"";t+=',"'.concat(a.replace(/"/g,'""'),'"')}),t+="\n"}),this.downloadFile("arb_translations.csv",t,"text/csv")},exportAsExcel:function(){var e="\ufeff",t=this.prepareCSVContent();this.downloadFile("arb_translations.xlsx",e+t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},exportAsJson:function(){var e=this,t={};this.files.forEach(function(n){var a=e.getLanguageFromFilename(n.name);t[a]=(0,ft.A)({},n.content)});var n=JSON.stringify(t,null,2);this.downloadFile("arb_translations.json",n,"application/json")},prepareCSVContent:function(){var e=this,t="Key";return this.files.forEach(function(n){t+=",".concat(e.getLanguageFromFilename(n.name))}),t+="\n",this.allUniqueKeys.forEach(function(n){t+='"'.concat(n,'"'),e.files.forEach(function(e){var a=e.content[n]||"";t+=',"'.concat(a.replace(/"/g,'""'),'"')}),t+="\n"}),t},downloadFile:function(e,t,n){var a=document.createElement("a"),s=new Blob([t],{type:n});a.href=URL.createObjectURL(s),a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},vt=(0,X.A)(mt,[["render",pt]]),bt=vt;var ht={class:"welcome-page text-center py-5"},kt={class:"container"},gt={class:"row justify-content-center"},yt={class:"col-md-8"},Lt={class:"getting-started"};function Ct(e,t,n,a,l,i){return(0,s.uX)(),(0,s.CE)("div",ht,[(0,s.Lk)("div",kt,[(0,s.Lk)("div",gt,[(0,s.Lk)("div",yt,[t[5]||(t[5]=(0,s.Fv)('<div class="welcome-icon mb-4" data-v-454e2d84><i class="bi bi-translate display-1 text-primary" data-v-454e2d84></i></div><h2 class="mb-4" data-v-454e2d84>欢迎使用 ARB 文件编辑器</h2><p class="lead mb-4" data-v-454e2d84> 这是一个专为 Flutter 项目设计的多语言管理工具，帮助您轻松编辑和管理 ARB 翻译文件。 </p><div class="features mb-5" data-v-454e2d84><div class="row" data-v-454e2d84><div class="col-md-4 mb-3" data-v-454e2d84><div class="card h-100" data-v-454e2d84><div class="card-body" data-v-454e2d84><i class="bi bi-upload text-success fs-2 mb-3" data-v-454e2d84></i><h5 data-v-454e2d84>上传文件</h5><p class="text-muted" data-v-454e2d84>支持上传多个ARB文件进行同时编辑</p></div></div></div><div class="col-md-4 mb-3" data-v-454e2d84><div class="card h-100" data-v-454e2d84><div class="card-body" data-v-454e2d84><i class="bi bi-pencil-square text-primary fs-2 mb-3" data-v-454e2d84></i><h5 data-v-454e2d84>编辑翻译</h5><p class="text-muted" data-v-454e2d84>直观的界面让翻译编辑变得简单高效</p></div></div></div><div class="col-md-4 mb-3" data-v-454e2d84><div class="card h-100" data-v-454e2d84><div class="card-body" data-v-454e2d84><i class="bi bi-download text-info fs-2 mb-3" data-v-454e2d84></i><h5 data-v-454e2d84>下载文件</h5><p class="text-muted" data-v-454e2d84>编辑完成后轻松下载更新后的文件</p></div></div></div></div></div>',4)),(0,s.Lk)("div",Lt,[t[2]||(t[2]=(0,s.Lk)("h4",{class:"mb-3"},"开始使用",-1)),t[3]||(t[3]=(0,s.Lk)("p",null,'点击上方的"上传 ARB 文件"区域，选择您的ARB文件开始编辑。',-1)),t[4]||(t[4]=(0,s.Lk)("p",{class:"text-muted small"}," 如果您没有ARB文件，可以使用示例文件进行测试。 ",-1)),(0,s.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(t){return e.$emit("load-examples")})},t[1]||(t[1]=[(0,s.Lk)("i",{class:"bi bi-file-earmark-text"},null,-1),(0,s.eW)(" 加载示例文件 ")]))])])])])])}const wt={name:"WelcomePage",emits:["load-examples"]},xt=(0,X.A)(wt,[["render",Ct],["__scopeId","data-v-454e2d84"]]),Ft=xt,Et={name:"App",components:{FileUploader:U,TranslationEditor:We,HelpGuide:$e,StatisticsPanel:bt,WelcomePage:Ft},data:function(){return{loadedFiles:[],showHelp:!1}},methods:{handleFilesUploaded:function(e){this.loadedFiles=e},updateTranslation:function(e,t,n){this.loadedFiles[e]&&this.loadedFiles[e].content&&(this.loadedFiles[e].content[t]=n)},addNewKey:function(){var e=this;if(0!==this.loadedFiles.length){var t=prompt("请输入新的键名:");if(t){var n=prompt("请输入默认值 (可选):")||"";this.loadedFiles.forEach(function(a,s){e.updateTranslation(s,t,n)})}}},loadExampleFiles:function(){var e={"@@locale":"en",appTitle:"ARB Editor",welcome:"Welcome to ARB Editor",uploadFile:"Upload ARB File",editTranslations:"Edit Translations",downloadFile:"Download File",search:"Search",addNewKey:"Add New Key",statistics:"Statistics",exportData:"Export Data",help:"Help",language:"Language",value:"Value",actions:"Actions"},t={"@@locale":"zh",appTitle:"ARB 编辑器",welcome:"欢迎使用 ARB 编辑器",uploadFile:"上传 ARB 文件",editTranslations:"编辑翻译",downloadFile:"下载文件",search:"搜索",addNewKey:"添加新键",statistics:"统计信息",exportData:"导出数据",help:"帮助",language:"语言",value:"值",actions:"操作"},n={"@@locale":"ja",appTitle:"ARB エディター",welcome:"ARB エディターへようこそ",uploadFile:"ARB ファイルをアップロード",editTranslations:"翻訳を編集",downloadFile:"ファイルをダウンロード",search:"検索",addNewKey:"新しいキーを追加",statistics:"統計"};this.loadedFiles=[{name:"intl_en.arb",content:e},{name:"intl_zh.arb",content:t},{name:"intl_ja.arb",content:n}]},downloadFile:function(e){if(this.loadedFiles[e]){var t=this.loadedFiles[e];this.generateDownload(t.name,JSON.stringify(t.content,null,2))}},downloadAllFiles:function(){var e=this;this.loadedFiles.forEach(function(t){e.generateDownload(t.name,JSON.stringify(t.content,null,2))})},generateDownload:function(e,t){var n=document.createElement("a"),a=new Blob([t],{type:"application/json"});n.href=URL.createObjectURL(a),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},At=(0,X.A)(Et,[["render",w]]),Kt=At;(0,a.Ef)(Kt).mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,(()=>{var e=[];n.O=(t,a,s,l)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,s,l]=e[d],o=!0,r=0;r<a.length;r++)(!1&l||i>=l)&&Object.keys(n.O).every(e=>n.O[e](a[r]))?a.splice(r--,1):(o=!1,l<i&&(i=l));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,s,l]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,l,[i,o,r]=a,c=0;if(i.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(r)var d=r(n)}for(t&&t(a);c<i.length;c++)l=i[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},a=self["webpackChunkarb_editor"]=self["webpackChunkarb_editor"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[504],()=>n(7126));a=n.O(a)})();